(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{e1a5:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"coadmin-page q-pa-sm q-gutter-sm"},[n("q-splitter",{attrs:{unit:"px",horizontal:e.$q.screen.xs,"emit-immediately":""},scopedSlots:e._u([{key:"before",fn:function(){return[n("div",{staticClass:"q-pa-xs"},[n("coadmin-tree",{ref:"tree",attrs:{"node-key":"id","label-key":"label",nodes:e.treeDatas,filter:e.treeDatasFilter,"filter-method":e.treeDatasFilterMethod,selected:e.treeNodeSelected,"selected-color":"purple",selectable:""},on:{"update:selected":function(t){e.treeNodeSelected=t}},scopedSlots:e._u([{key:"toolbar",fn:function(){return[n("q-toolbar",{attrs:{flat:""}},[n("div",{staticClass:"row full-width"},[n("q-input",{ref:"filter",staticClass:"col-8",attrs:{dense:"",label:"Filter..."},scopedSlots:e._u([{key:"append",fn:function(){return[""!==e.treeDatasFilter?n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"clear"},on:{click:e.treeDatasFilterReset}}):e._e()]},proxy:!0}]),model:{value:e.treeDatasFilter,callback:function(t){e.treeDatasFilter=t},expression:"treeDatasFilter"}}),n("q-space"),n("q-btn",{staticClass:"col-auto",attrs:{dense:"",icon:e.treeDatasExpanded?"unfold_more":"unfold_less"},on:{click:function(t){(e.treeDatasExpanded=!e.treeDatasExpanded)?e.$refs.tree.collapseAll():e.$refs.tree.expandAll()}}})],1)])]},proxy:!0},{key:"default-header",fn:function(t){return[n("div",{class:{"text-weight-bold":e.treeNodeSelected==t.key}},[e._v(e._s(t.node.label))])]}}])})],1)]},proxy:!0},e.$q.screen.xs?{key:"separator",fn:function(){return[n("q-avatar",{attrs:{color:"primary","text-color":"white",size:"35px",icon:"height"}})]},proxy:!0}:null,{key:"after",fn:function(){return[n("div",{staticClass:"q-pa-sm"},[n("coadmin-tree-table",{attrs:{columns:e.columns,data:e.treeDatasSelected}})],1)]},proxy:!0}],null,!0),model:{value:e.splitter,callback:function(t){e.splitter=t},expression:"splitter"}})],1)},a=[],l=(n("4de4"),n("c975"),n("b0c0"),n("6374")),i=n.n(l),s=n("486f"),o=n("1b8b"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("q-markup-table",{class:e.classes,attrs:{separator:e.separator,dense:e.dense,dark:e.dark,flat:e.flat,bordered:e.bordered,square:e.square}},[n("thead",[n("tr",e._l(e.columns,(function(t,r){return n("th",{class:"text-"+t.align,attrs:{Key:r},on:{click:function(n){t.sortable&&e.sortBy(t)}}},[e._v("\n                "+e._s(t.label)+"\n                "),t.sorted?n("q-icon",{attrs:{name:"asc"==t.sortDirection?"arrow_upward":"arrow_downward"}}):e._e()],1)})),0)]),n("tbody",[e._l(e.arrayTreeObj,(function(t,r){return[e.hasDefaultSlot?n("tr",{key:r},[e._t("body",null,{item:t,toggle:e.toggle,setPadding:e.setPadding,iconName:e.iconName})],2):e._e()]})),e._l(e.arrayTreeObj,(function(t,r){return[e.hasDefaultSlot?e._e():n("tr",{key:r},e._l(e.columns,(function(r,a){return n("td",{key:a,class:"text-"+r.align,attrs:{"data-th":"Name"}},[n("div",{class:e.hasChildren(t)?"q-pl-lg":"",style:0==a?e.setPadding(t):{"padding-left":"30px"}},[e.hasChildren(t)&&0==a?n("q-btn",{attrs:{icon:e.iconName(t),flat:"",dense:""},on:{click:function(n){0!=a||e.toggle(t)}}}):e._e(),n("span",{staticClass:"q-ml-sm"},[e._v(e._s(t[r.field]))])],1)])})),0)]}))],2)])],1)},c=[],u=(n("4160"),n("4e82"),n("159b"),{name:"CoadminTreeTable",props:["data","columns","separator","dense","dark","flat","bordered","square","classes","defaultExpandAll"],data:function(){return{leftDrawerOpen:!1,isExpanded:!0,selectedRowID:{},itemId:null,temp_data:[],temp_index:1,first_call:!1}},watch:{selectedIDRow:function(e){null!=this.selectedRowID&&this.$set(this.selectedRowID,"_index",e)}},methods:{recursive:function(e,t,n,r,a,l){var i=this;e.forEach((function(e){if(!e.children||0==e.children.length)return e.level=n,e.leaf=!0,e.sortDirection="none",e.sorted=!1,e["_index"]=i.temp_index,i.temp_index=i.temp_index+1,t.push(e),!1;e.level=n,e.leaf=!1,e.sortDirection="none",e.sorted=!1,e["_index"]=i.temp_index,i.temp_index=i.temp_index+1,l&&(e.expend=!0),t.push(e),e._index==r&&(e.expend=a),1==e.expend&&i.recursive(e.children,t,e.level+1,r,a,l)}))},iconName:function(e){return 1==e.expend?"remove":e.children&&e.children.length>0?"add":"done"},hasChildren:function(e){return e.expend||e.children&&e.children.length>0},toggle:function(e){var t=this;if(t.itemId=e._index,e.leaf=!1,0==e.leaf&&void 0==e.expend&&void 0!=e.children&&0!=e.children.length&&t.recursive(e.children,[],e.level+1,e._index,e.expend,!1),1==e.expend&&void 0!=e.children){e.children.forEach((function(e){e.expend=void 0,t.setUndefined(e)})),t.$set(e,"expend",void 0),t.$set(e,"leaf",!1),t.itemId=null}},setPadding:function(e){return this.hasChildren(e)?"padding-left: ".concat(30*e.level,"px;"):"padding-left: ".concat(30*(e.level+1),"px;")},setUndefined:function(e){var t=this;e.hasOwnProperty("children")&&e.children.forEach((function(e){e.expend=void 0,t.setUndefined(e)}))},sortBy:function(e){"asc"===e.sortDirection?(this.sort_recursive(this.data,e,!0),e.sortDirection="desc",e.arrow_downward="arrow_downward"):(this.sort_recursive(this.data,e,!1),e.sortDirection="asc"),e.sorted=!0,this.resetSorting(e)},sort_recursive:function(e,t,n){e.sort(this.sort_by(t,n));for(var r=0;r<e.length;r++)e[r].hasOwnProperty("children")&&this.sort_recursive(e[r].children,t,n)},sort_by:function(e,t){var n=t?-1:1;if("custom"===e.sortingType&&"function"===typeof e.sortingFunc)return function(t,r){return e.sortingFunc(t,r)*n};var r=function(t){return t.hasOwnProperty(e.field)?null===t[e.field]?"":t[e.field].toLowerCase():""};switch(e.sortingType){case"number":r=function(t){return parseFloat(t[e.field])};break;case"date":r=function(t){return new Date(t[e.field])};break}return function(e,t){return e=r(e),t=r(t),n*((e>t)-(t>e))}},resetSorting:function(e){for(var t=this.columns.length,n=0;n<t;n++){var r=this.columns[n];r.field!=e.field&&(r.sorted=!1,r.sortDirection="none")}}},computed:{arrayTreeObj:function(){var e=this,t=[];return this.temp_data=[],e.temp_index=1,e.recursive(e.data,t,0,e.itemId,e.isExpanded,e.first_call),e.first_call=!1,t},hasDefaultSlot:function(){return this.$scopedSlots.hasOwnProperty("body")}},mounted:function(){this.defaultExpandAll&&(this.first_call=!0)}}),f=u,p=n("2877"),h=n("2bb1"),m=n("0016"),b=n("9c40"),v=n("eebe"),x=n.n(v),g=Object(p["a"])(f,d,c,!1,null,"c4e52406",null),_=g.exports;x()(g,"components",{QMarkupTable:h["a"],QIcon:m["a"],QBtn:b["a"]});var y={name:"PageTreeTable2",components:{CoadminTree:o["a"],CoadminTreeTable:_},data:function(){return{splitter:250,treeNodeSelected:null,treeDatasFilter:"",treeDatasExpanded:!0,text:"",textSearch:"",currentPage:1,numberPerPage:10,numberPerPageOptions:[{label:"10/页",value:10},{label:"20/页",value:20},{label:"30/页",value:30},{label:"40/页",value:40},{label:"50/页",value:50},{label:"100/页",value:100}],searchToggle:!1,loading:!1,dialogData:!1,dialogFullscreen:!1,selected:[],visibleColumns:["id","name","sort","enabled"],columns:[{name:"id",label:"ID",field:"id",sortable:!0},{name:"pid",label:"PID",field:"pid",sortable:!0},{name:"name",field:"name",required:!0,label:"名称",align:"left",format:function(e){return"".concat(e)},sortable:!0},{name:"sort",field:"sort",label:"sort"},{name:"enabled",field:"enabled",label:"enabled"},{name:"treeNames",field:"treeNames",label:"treeNames",align:"left"}]}},mounted:function(){},watch:{"$q.screen.gt.xs":function(e){console.log("$q.screen.gt.xs="+this.$q.screen.gt.xs+", val="+e)}},computed:{treeDatas:function(){return s["a"].content},treeDatasSelected:function(){var e=this.getTreeDatasByPid(this.treeDatas,this.treeNodeSelected);return e||[]}},methods:{treeDatasFilterReset:function(){this.treeDatasFilter="",this.$refs.filter.focus()},treeDatasFilterMethod:function(e,t){var n=t.toLowerCase();return e.name&&e.name.toLowerCase().indexOf(n)>-1||e.nameLetter&&e.nameLetter.toLowerCase().indexOf(n)>-1},getTreeDatasByPid:function(e,t){if(!e)return null;if(null==t||void 0===t)return e;var n=e.filter((function(e){return e.pid===t}));if(n&&n.length>0)return n;var r,a=i()(e);try{for(a.s();!(r=a.n()).done;){var l=r.value;if(l.children&&l.children.length>0&&(n=this.getTreeDatasByPid(l.children,t),n&&n.length>0))return n}}catch(s){a.e(s)}finally{a.f()}return null},rowViewClick:function(e){this.dialogData=!0},rowLooooooongButtonClick:function(){},moveFab:function(e){this.draggingFab=!0!==e.isFirst&&!0!==e.isFinal,this.fabPos=[this.fabPos[0]-e.delta.x,this.fabPos[1]-e.delta.y]}}},D=y,w=n("8562"),k=n("65c6"),q=n("27f9"),C=n("2c91"),P=n("cb32"),F=Object(p["a"])(D,r,a,!1,null,null,null);t["default"]=F.exports;x()(F,"components",{QSplitter:w["a"],QToolbar:k["a"],QInput:q["a"],QIcon:m["a"],QSpace:C["a"],QBtn:b["a"],QAvatar:P["a"]})}}]);